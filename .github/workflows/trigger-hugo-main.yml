name: Trigger hugo-main Deploy
on:
  push:
    branches: ["main"]
    paths:
      - '**.md'
      - '**.markdown'
      - '**.yml'
      - '**.yaml'
      - 'images/**'
      - 'static/**'
      - 'assets/**'
jobs:
  dispatch:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger hugo-main deploy workflow
        uses: peter-evans/repository-dispatch@v3
        with:
          token: ${{ secrets.GH_PAGE_ACTION_TOKEN }}     # 第一步里配置的 secret 名
          repository: WASIDJ/hugo-main       # 目标仓库（注意大小写和 org/repo）
          event-type: blog-content-updated   # 自定义事件名
          client-payload: |
            {
              "source": "blog-content",
              "ref": "${{ github.ref }}",
              "sha": "${{ github.sha }}",
              "pusher": "${{ github.actor }}"
            }